<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuTTS Air - Voice Cloning</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üéôÔ∏è NeuTTS Air Voice Cloning</h1>
            <p class="subtitle">Clone voices and generate speech with AI</p>
            <div class="status-bar">
                <span id="status-indicator" class="status-dot"></span>
                <span id="status-text">Checking connection...</span>
            </div>
        </header>

        <main>
            <!-- Clone Voice Section -->
            <section class="card">
                <h2>üìù Clone a Voice</h2>
                <p class="help-text">Record your voice or upload an audio file (recommended: 3-15 seconds, but you can record longer)</p>
                <p class="help-text" style="color: #10b981; font-size: 0.9rem;">‚úì Audio will be automatically optimized (converted to mono, normalized, resampled to 24kHz)</p>

                <!-- Audio Source Tabs -->
                <div class="audio-source-tabs">
                    <button type="button" class="tab-btn active" data-tab="upload">üìÅ Upload File</button>
                    <button type="button" class="tab-btn" data-tab="record">üé§ Record Audio</button>
                </div>

                <form id="clone-form">
                    <div class="form-group">
                        <label for="voice-name">Voice Name:</label>
                        <input type="text" id="voice-name" name="voice-name"
                               placeholder="e.g., My Voice" required>
                    </div>

                    <div class="form-group">
                        <label for="reference-text">Reference Text (optional but recommended):</label>
                        <input type="text" id="reference-text" name="reference-text"
                               placeholder="Transcription of the audio">
                        <small>Providing the transcription significantly improves quality</small>
                    </div>

                    <!-- Upload Tab Content -->
                    <div class="tab-content active" id="upload-tab">
                        <div class="form-group">
                            <label for="audio-file" class="file-label">
                                <span class="file-label-text">Choose Audio File</span>
                                <input type="file" id="audio-file" name="audio-file"
                                       accept=".wav,.mp3,.flac,.ogg">
                            </label>
                            <div id="file-name" class="file-name"></div>
                        </div>
                    </div>

                    <!-- Record Tab Content -->
                    <div class="tab-content" id="record-tab">
                        <div class="recorder-container">
                            <div class="recorder-controls">
                                <button type="button" class="btn btn-record" id="start-record-btn">
                                    <span class="record-icon">‚è∫</span> Start Recording
                                </button>
                                <button type="button" class="btn btn-stop" id="stop-record-btn" disabled>
                                    <span class="stop-icon">‚èπ</span> Stop
                                </button>
                                <button type="button" class="btn btn-secondary" id="clear-record-btn" disabled>
                                    üóëÔ∏è Clear
                                </button>
                            </div>
                            <div class="recording-info">
                                <div id="recording-timer" class="recording-timer">00:00</div>
                                <div id="recording-status" class="recording-status"></div>
                            </div>
                            <div id="audio-preview-container" class="audio-preview-container" style="display: none;">
                                <h4>Preview Recording</h4>
                                <audio id="audio-preview" controls></audio>
                                <p class="preview-info" id="preview-info"></p>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary" id="clone-btn">
                        Clone Voice
                    </button>
                    <div id="clone-status" class="status-message"></div>
                </form>
            </section>

            <!-- My Voices Section -->
            <section class="card">
                <h2>üéµ My Voices</h2>
                <div id="voices-list" class="voices-list">
                    <p class="loading">Loading voices...</p>
                </div>
            </section>

            <!-- Generate Speech Section -->
            <section class="card">
                <h2>üîä Generate Speech</h2>

                <form id="generate-form">
                    <div class="form-group">
                        <label for="voice-select">Select Voice:</label>
                        <select id="voice-select" name="voice-select" required>
                            <option value="">-- Select a voice --</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="text-input">Text to Speak:</label>
                        <textarea id="text-input" name="text-input" rows="4"
                                  placeholder="Enter the text you want to convert to speech..." required></textarea>
                        <small id="char-count">0 characters</small>
                    </div>

                    <button type="submit" class="btn btn-primary" id="generate-btn">
                        Generate Speech
                    </button>
                    <div id="generate-status" class="status-message"></div>
                </form>

                <!-- Audio Player -->
                <div id="audio-player-container" class="audio-player-container" style="display: none;">
                    <h3>Generated Audio</h3>
                    <audio id="audio-player" controls></audio>
                    <div class="audio-controls">
                        <button class="btn btn-secondary" id="download-btn">Download</button>
                    </div>
                </div>
            </section>

            <!-- Tips Section -->
            <section class="card tips">
                <h2>üí° Tips for Best Results</h2>
                <ul>
                    <li><strong>Audio Quality:</strong> Use clear audio with minimal background noise</li>
                    <li><strong>Duration:</strong> 3-15 seconds is optimal, but longer recordings work too (just use the best quality portion)</li>
                    <li><strong>Format:</strong> Any audio format works - the system auto-converts to mono 24kHz WAV</li>
                    <li><strong>Reference Text:</strong> IMPORTANT - Providing the exact transcription significantly improves voice quality</li>
                    <li><strong>Natural Speech:</strong> Use audio with natural, continuous speech (like a monologue)</li>
                    <li><strong>Avoid:</strong> Music, multiple speakers, long pauses, or sudden volume changes</li>
                </ul>
            </section>
        </main>

        <footer>
            <p>Powered by <a href="https://github.com/neuphonic/neutts-air" target="_blank">NeuTTS Air</a> by Neuphonic</p>
            <p><a href="/docs" target="_blank">API Documentation</a></p>
        </footer>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
